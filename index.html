<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animal Tracking System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .search-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .animal-details {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 5px;
            display: none;
        }
        
        .detail-row {
            margin-bottom: 10px;
        }
        
        .detail-label {
            font-weight: bold;
            display: inline-block;
            width: 150px;
        }
        
        .dataTableEx {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            display: none;
        }
        
        .ctsol-headerClass-bold {
            background-color: #6c757d;
            color: white;
            padding: 10px;
            text-align: left;
            font-weight: bold;
            border: 1px solid #ddd;
        }
        
        .rowClass1 td {
            padding: 8px 10px;
            border: 1px solid #ddd;
        }
        
        .gray-grid-first {
            background-color: #f1f3f4;
        }
        
        .gray-grid-second {
            background-color: #ffffff;
        }
        
        .ctsol-view-cell {
            margin: 2px 0;
        }
        
        .outputText {
            font-weight: bold;
        }
        
        .no-results {
            display: none;
            color: #dc3545;
            margin-top: 20px;
            padding: 15px;
            background-color: #f8d7da;
            border-radius: 5px;
        }
        
        input[type="text"] {
            width: 120px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
            text-transform: uppercase;
        }
        
        input[type="submit"] {
            padding: 5px 15px;
            margin-left: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        
        input[type="submit"]:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Animal Tracking System</h1>
        
        <div class="search-section">
            <label for="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:searchForm:text_eartag">Enter Ear Tag Number:</label>
            <input 
                id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:searchForm:text_eartag" 
                name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:searchForm:text_eartag" 
                style="width:120px;" 
                maxlength="16" 
                onblur="this.value=this.value.toUpperCase();" 
                alt="To view another animal, enter the eartag number" 
                title="The eartag field"
            >
            <input 
                type="submit" 
                value="Search" 
                id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:searchForm:button_search" 
                name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:searchForm:button_search" 
                alt="Click here if you have entered a new eartag number" 
                title="The search button"
            >
        </div>
        
        <div id="animal-details" class="animal-details">
            <h2>Animal Details</h2>
            <div class="detail-row">
                <span class="detail-label">Date of Birth:</span>
                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:viewCalvingHistoryForm:table_animal_details:0:value_date_of_birth">18/01/2025</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Sex:</span>
                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:viewCalvingHistoryForm:table_animal_details:0:value_sex">M</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Ear Tag:</span>
                <span id="ear-tag-display">1</span>
            </div>
        </div>
        
        <div id="no-results" class="no-results">
            No animal found with the specified ear tag number.
        </div>
        
        <table id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history" class="dataTableEx" width="100%" border="0" cellpadding="0" cellspacing="0">
            <thead>
                <tr>
                    <th class="ctsol-headerClass-bold" width="20%">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:autoid72" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:autoid72" class="gray-right-border">
                                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:header_holding" class="outputText">Holding</span>
                            </div>
                        </div>
                    </th>
                    <th class="ctsol-headerClass-bold" width="20%">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:header_on_type" class="outputText">Movement</span>
                        </div>
                    </th>
                    <th class="ctsol-headerClass-bold" width="20%">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:autoid83" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:autoid83" class="gray-right-border">
                                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:header_on_date" class="outputText">ON</span>
                            </div>
                        </div>
                    </th>
                    <th class="ctsol-headerClass-bold" width="20%">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:header_off_type" class="outputText">Movement</span>
                        </div>
                    </th>
                    <th class="ctsol-headerClass-bold" width="20%">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:header_off_date" class="outputText">OFF</span>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- Movement data will be populated dynamically -->
            </tbody>
        </table>
    </div>

    <script>
        // Animal data storage
        const animalData = {
            '1': {
                dateOfBirth: '18/01/2025',
                sex: 'M',
                earTag: '1',
                movements: [
                    { holdingId: '06', holdingName: 'Cheshire', onMovement: 'Birth', onDate: '18/01/2025', offMovement: 'Off Holding', offDate: '10/02/2025' },
                    { holdingId: '56', holdingName: 'Clwyd', onMovement: 'On Holding', onDate: '10/02/2025', offMovement: 'Off Holding', offDate: '10/02/2025' },
                    { holdingId: '56', holdingName: 'Clwyd', onMovement: 'On Holding', onDate: '10/02/2025', offMovement: 'Off Holding', offDate: '23/04/2025' },
                    { holdingId: '55', holdingName: 'Dyfed', onMovement: 'On Holding', onDate: '23/04/2025', offMovement: '', offDate: '' }
                ]
            },
            '2': {
                dateOfBirth: '05/03/2024',
                sex: 'F',
                earTag: '2',
                movements: [
                    { holdingId: '12', holdingName: 'Yorkshire', onMovement: 'Birth', onDate: '05/03/2024', offMovement: 'Off Holding', offDate: '15/06/2024' },
                    { holdingId: '23', holdingName: 'Lancashire', onMovement: 'On Holding', onDate: '15/06/2024', offMovement: 'Off Holding', offDate: '20/08/2024' },
                    { holdingId: '34', holdingName: 'Cumbria', onMovement: 'On Holding', onDate: '20/08/2024', offMovement: '', offDate: '' }
                ]
            },
            '3': {
                dateOfBirth: '12/11/2023',
                sex: 'M',
                earTag: '3',
                movements: [
                    { holdingId: '07', holdingName: 'Devon', onMovement: 'Birth', onDate: '12/11/2023', offMovement: 'Off Holding', offDate: '28/01/2024' },
                    { holdingId: '18', holdingName: 'Cornwall', onMovement: 'On Holding', onDate: '28/01/2024', offMovement: 'Off Holding', offDate: '15/04/2024' },
                    { holdingId: '29', holdingName: 'Somerset', onMovement: 'On Holding', onDate: '15/04/2024', offMovement: 'Off Holding', offDate: '10/07/2024' },
                    { holdingId: '41', holdingName: 'Dorset', onMovement: 'On Holding', onDate: '10/07/2024', offMovement: 'Off Holding', offDate: '22/09/2024' },
                    { holdingId: '52', holdingName: 'Wiltshire', onMovement: 'On Holding', onDate: '22/09/2024', offMovement: '', offDate: '' }
                ]
            },
            '4': {
                dateOfBirth: '08/07/2024',
                sex: 'F',
                earTag: '4',
                movements: [
                    { holdingId: '15', holdingName: 'Gloucestershire', onMovement: 'Birth', onDate: '08/07/2024', offMovement: 'Off Holding', offDate: '25/09/2024' },
                    { holdingId: '26', holdingName: 'Oxfordshire', onMovement: 'On Holding', onDate: '25/09/2024', offMovement: '', offDate: '' }
                ]
            },
            '5': {
                dateOfBirth: '20/09/2023',
                sex: 'M',
                earTag: '5',
                movements: [
                    { holdingId: '03', holdingName: 'Kent', onMovement: 'Birth', onDate: '20/09/2023', offMovement: 'Off Holding', offDate: '12/12/2023' },
                    { holdingId: '14', holdingName: 'Surrey', onMovement: 'On Holding', onDate: '12/12/2023', offMovement: 'Off Holding', offDate: '18/03/2024' },
                    { holdingId: '25', holdingName: 'Sussex', onMovement: 'On Holding', onDate: '18/03/2024', offMovement: 'Off Holding', offDate: '05/06/2024' },
                    { holdingId: '36', holdingName: 'Hampshire', onMovement: 'On Holding', onDate: '05/06/2024', offMovement: 'Off Holding', offDate: '14/08/2024' },
                    { holdingId: '47', holdingName: 'Berkshire', onMovement: 'On Holding', onDate: '14/08/2024', offMovement: 'Off Holding', offDate: '28/10/2024' },
                    { holdingId: '58', holdingName: 'Buckinghamshire', onMovement: 'On Holding', onDate: '28/10/2024', offMovement: '', offDate: '' }
                ]
            },
            '6': {
                dateOfBirth: '14/04/2024',
                sex: 'F',
                earTag: '6',
                movements: [
                    { holdingId: '09', holdingName: 'Northumberland', onMovement: 'Birth', onDate: '14/04/2024', offMovement: '', offDate: '' }
                ]
            },
            '7': {
                dateOfBirth: '03/08/2023',
                sex: 'M',
                earTag: '7',
                movements: [
                    { holdingId: '11', holdingName: 'Staffordshire', onMovement: 'Birth', onDate: '03/08/2023', offMovement: 'Off Holding', offDate: '20/11/2023' },
                    { holdingId: '22', holdingName: 'Derbyshire', onMovement: 'On Holding', onDate: '20/11/2023', offMovement: 'Off Holding', offDate: '15/02/2024' },
                    { holdingId: '33', holdingName: 'Nottinghamshire', onMovement: 'On Holding', onDate: '15/02/2024', offMovement: 'Death', offDate: '08/07/2024' }
                ]
            },
            '8': {
                dateOfBirth: '16/12/2022',
                sex: 'F',
                earTag: '8',
                movements: [
                    { holdingId: '04', holdingName: 'Lincolnshire', onMovement: 'Birth', onDate: '16/12/2022', offMovement: 'Off Holding', offDate: '25/05/2023' },
                    { holdingId: '17', holdingName: 'Norfolk', onMovement: 'On Holding', onDate: '25/05/2023', offMovement: 'Off Holding', offDate: '12/09/2023' },
                    { holdingId: '28', holdingName: 'Suffolk', onMovement: 'On Holding', onDate: '12/09/2023', offMovement: 'Off Holding', offDate: '30/01/2024' },
                    { holdingId: '39', holdingName: 'Essex', onMovement: 'On Holding', onDate: '30/01/2024', offMovement: 'Off Holding', offDate: '18/04/2024' },
                    { holdingId: '48', holdingName: 'Hertfordshire', onMovement: 'On Holding', onDate: '18/04/2024', offMovement: 'Death', offDate: '22/12/2024' }
                ]
            }
        };

        // Get DOM elements using original IDs
        const eartagInput = document.getElementById('viewns_7_6GL81BO09GVV70IEAEIID52OI7_:searchForm:text_eartag');
        const searchButton = document.getElementById('viewns_7_6GL81BO09GVV70IEAEIID52OI7_:searchForm:button_search');
        const animalDetails = document.getElementById('animal-details');
        const movementTable = document.getElementById('viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history');
        const noResults = document.getElementById('no-results');
        const dateOfBirthSpan = document.getElementById('viewns_7_6GL81BO09GVV70IEAEIID52OI7_:viewCalvingHistoryForm:table_animal_details:0:value_date_of_birth');
        const sexSpan = document.getElementById('viewns_7_6GL81BO09GVV70IEAEIID52OI7_:viewCalvingHistoryForm:table_animal_details:0:value_sex');
        const earTagDisplay = document.getElementById('ear-tag-display');

        // Function to update movement history table with original HTML structure
        function updateMovementTable(movements) {
            const tbody = movementTable.querySelector('tbody');
            tbody.innerHTML = '';
            
            movements.forEach((movement, index) => {
                const row = document.createElement('tr');
                row.className = 'rowClass1';
                
                row.innerHTML = `
                    <td width="20%" class="gray-grid-first">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid76" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid76">
                                <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid77" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid77" class="ctsol-view-cell">
                                    <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:value_countyHoldingId">${movement.holdingId}</span>
                                </div>
                                <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid78" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid78" class="ctsol-view-cell">
                                    <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:value_countyHoldingName">${movement.holdingName}</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td width="20%" class="gray-grid-second">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid81" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid81">
                                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid82">${movement.onMovement}</span>
                            </div>
                        </div>
                    </td>
                    <td width="20%" class="gray-grid-first">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid86" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid86">
                                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid87">${movement.onDate}</span>
                            </div>
                        </div>
                    </td>
                    <td width="20%" class="gray-grid-second">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid90" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid90">
                                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid91">${movement.offMovement}</span>
                            </div>
                        </div>
                    </td>
                    <td width="20%" class="gray-grid-second">
                        <div style="overflow: -moz-scrollbars-none; overflow-x: hidden; width: 100%;">
                            <div id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid94" name="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid94">
                                <span id="viewns_7_6GL81BO09GVV70IEAEIID52OI7_:data_form:table_movement_history:${index}:autoid95">${movement.offDate}</span>
                            </div>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // Handle search functionality
        function performSearch() {
            const earTag = eartagInput.value.trim().toUpperCase();
            
            // Hide all sections first
            animalDetails.style.display = 'none';
            movementTable.style.display = 'none';
            noResults.style.display = 'none';
            
            if (earTag === '') {
                return;
            }
            
            // Check if animal exists in our data
            if (animalData[earTag]) {
                const animal = animalData[earTag];
                
                // Update animal details using original IDs
                dateOfBirthSpan.textContent = animal.dateOfBirth;
                sexSpan.textContent = animal.sex;
                earTagDisplay.textContent = animal.earTag;
                
                // Update movement history table
                updateMovementTable(animal.movements);
                
                // Show animal details and movement table
                animalDetails.style.display = 'block';
                movementTable.style.display = 'table';
            } else {
                // Show no results message
                noResults.style.display = 'block';
            }
        }

        // Function to handle key press validation (from original)
        function ns_7_6GL81BO09GVV70IEAEIID52OI7_text_eartagallow(input, event) {
            const char = String.fromCharCode(event.which);
            if (!/[a-zA-Z0-9]/.test(char)) {
                event.preventDefault();
                return false;
            }
            return true;
        }

        // Event listeners
        searchButton.addEventListener('click', performSearch);
        
        eartagInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
            return ns_7_6GL81BO09GVV70IEAEIID52OI7_text_eartagallow(this, event);
        });

        // Auto-uppercase as user types (already handled by onblur)
        eartagInput.addEventListener('input', function() {
            this.value = this.value.toUpperCase();
        });
    </script>
</body>
</html>
